<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¦»çº¿ Markdown å’Œ LaTeX è§£æå™¨</title>
    <script>
        // MathJax é…ç½®
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']],
                processEscapes: true,
                processEnvironments: true,
                tags: 'ams'
            },
            options: {
                skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
                ignoreHtmlClass: 'tex-ignore'
            },
            startup: {
                ready: () => {
                    console.log('MathJax å·²åŠ è½½å¹¶å‡†å¤‡å°±ç»ª');
                    MathJax.startup.defaultReady();
                    updatePreview();
                }
            }
        };
    </script>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(90deg, #2c3e50, #4a6491);
            color: white;
            padding: 25px 30px;
            text-align: center;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            letter-spacing: 1px;
        }
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.5;
        }
        
        .content {
            display: flex;
            flex-wrap: wrap;
            padding: 25px;
            gap: 25px;
        }
        
        .editor-section, .preview-section {
            flex: 1;
            min-width: 300px;
        }
        
        .section-title {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: #2c3e50;
            padding-bottom: 8px;
            border-bottom: 2px solid #4a6491;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .section-title i {
            color: #4a6491;
        }
        
        .editor-container {
            border: 2px solid #ddd;
            border-radius: 10px;
            overflow: hidden;
            height: 500px;
            display: flex;
            flex-direction: column;
        }
        
        .editor-toolbar {
            background-color: #f1f5f9;
            padding: 12px 15px;
            border-bottom: 1px solid #ddd;
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .tool-btn {
            padding: 6px 12px;
            background-color: #4a6491;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background-color 0.3s;
        }
        
        .tool-btn:hover {
            background-color: #2c3e50;
        }
        
        textarea {
            width: 100%;
            flex-grow: 1;
            padding: 20px;
            border: none;
            resize: none;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 15px;
            line-height: 1.5;
            outline: none;
            background-color: #f9fbfd;
        }
        
        .preview-container {
            border: 2px solid #ddd;
            border-radius: 10px;
            overflow-y: auto;
            padding: 25px;
            height: 500px;
            background-color: white;
            box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.05);
        }
        
        .markdown-body {
            font-size: 16px;
        }
        
        .markdown-body h1, .markdown-body h2, .markdown-body h3 {
            margin-top: 24px;
            margin-bottom: 16px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        .markdown-body h1 {
            font-size: 2em;
            border-bottom: 2px solid #eaecef;
            padding-bottom: 0.3em;
        }
        
        .markdown-body h2 {
            font-size: 1.5em;
            border-bottom: 1px solid #eaecef;
            padding-bottom: 0.3em;
        }
        
        .markdown-body p {
            margin-bottom: 16px;
        }
        
        .markdown-body code {
            background-color: rgba(27,31,35,0.05);
            border-radius: 3px;
            font-family: 'SFMono-Regular', Consolas, monospace;
            padding: 0.2em 0.4em;
            font-size: 0.9em;
        }
        
        .markdown-body pre {
            background-color: #f6f8fa;
            border-radius: 6px;
            padding: 16px;
            overflow: auto;
            margin-bottom: 16px;
        }
        
        .markdown-body blockquote {
            border-left: 4px solid #4a6491;
            padding-left: 16px;
            color: #6a737d;
            margin-bottom: 16px;
        }
        
        .markdown-body table {
            border-collapse: collapse;
            margin-bottom: 16px;
            width: 100%;
        }
        
        .markdown-body th, .markdown-body td {
            border: 1px solid #dfe2e5;
            padding: 6px 13px;
        }
        
        .markdown-body th {
            background-color: #f6f8fa;
            font-weight: 600;
        }
        
        .examples {
            margin-top: 30px;
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 10px;
        }
        
        .examples h3 {
            margin-bottom: 15px;
            color: #2c3e50;
        }
        
        .example-btns {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }
        
        .example-btn {
            padding: 8px 16px;
            background-color: #e9ecef;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .example-btn:hover {
            background-color: #4a6491;
            color: white;
        }
        
        footer {
            text-align: center;
            padding: 20px;
            color: #6c757d;
            font-size: 0.9rem;
            border-top: 1px solid #dee2e6;
            margin-top: 20px;
        }
        
        @media (max-width: 768px) {
            .content {
                flex-direction: column;
            }
            
            .editor-section, .preview-section {
                width: 100%;
            }
            
            h1 {
                font-size: 1.8rem;
            }
        }
        
        .math-block {
            text-align: center;
            margin: 20px 0;
            padding: 10px;
            overflow-x: auto;
        }
        
        .mjx-chtml {
            outline: none;
        }
        
        .status {
            padding: 10px 15px;
            background-color: #d4edda;
            color: #155724;
            border-radius: 5px;
            margin-bottom: 15px;
            display: none;
        }
        
        .status.show {
            display: block;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ç¦»çº¿ Markdown å’Œ LaTeX è§£æå™¨</h1>
            <p class="subtitle">ä½¿ç”¨ MathJax å’Œ markdown-it åœ¨æµè§ˆå™¨ä¸­ç¦»çº¿è§£æ Markdown æ–‡æ¡£å’Œ LaTeX æ•°å­¦å…¬å¼ã€‚æ— éœ€ç½‘ç»œè¿æ¥ï¼Œæ‰€æœ‰å¤„ç†éƒ½åœ¨æœ¬åœ°å®Œæˆã€‚</p>
        </header>
        
        <div class="status" id="status"></div>
        
        <div class="content">
            <div class="editor-section">
                <h2 class="section-title"><i>ğŸ“</i> ç¼–è¾‘å™¨</h2>
                <div class="editor-container">
                    <div class="editor-toolbar">
                        <button class="tool-btn" onclick="insertText('# æ ‡é¢˜')">H1</button>
                        <button class="tool-btn" onclick="insertText('## æ ‡é¢˜')">H2</button>
                        <button class="tool-btn" onclick="insertText('**ç²—ä½“**')">ç²—ä½“</button>
                        <button class="tool-btn" onclick="insertText('*æ–œä½“*')">æ–œä½“</button>
                        <button class="tool-btn" onclick="insertText('[é“¾æ¥](https://example.com)')">é“¾æ¥</button>
                        <button class="tool-btn" onclick="insertText('```\nä»£ç å—\n```')">ä»£ç å—</button>
                        <button class="tool-btn" onclick="insertText('$å†…è”å…¬å¼$')">è¡Œå†…å…¬å¼</button>
                        <button class="tool-btn" onclick="insertText('$$\nå—çº§å…¬å¼\n$$')">å—çº§å…¬å¼</button>
                        <button class="tool-btn" onclick="clearEditor()">æ¸…ç©º</button>
                    </div>
                    <textarea id="markdown-input" placeholder="åœ¨æ­¤è¾“å…¥ Markdown æ–‡æœ¬...&#10;&#10;æ”¯æŒï¼š&#10;- æ ‡é¢˜ã€åˆ—è¡¨ã€è¡¨æ ¼&#10;- ä»£ç å—å’Œè¡Œå†…ä»£ç &#10;- é“¾æ¥å’Œå›¾ç‰‡&#10;- LaTeX æ•°å­¦å…¬å¼ï¼š$E = mc^2$&#10;- å—çº§å…¬å¼ï¼š$$ \int_a^b f(x)dx $$" autofocus></textarea>
                </div>
            </div>
            
            <div class="preview-section">
                <h2 class="section-title"><i>ğŸ‘ï¸</i> é¢„è§ˆ</h2>
                <div class="preview-container">
                    <div id="preview" class="markdown-body"></div>
                </div>
            </div>
        </div>
        
        <div class="examples">
            <h3>ç¤ºä¾‹</h3>
            <p>ç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®åŠ è½½ç¤ºä¾‹å†…å®¹ï¼š</p>
            <div class="example-btns">
                <button class="example-btn" onclick="loadExample('math')">æ•°å­¦å…¬å¼ç¤ºä¾‹</button>
                <button class="example-btn" onclick="loadExample('physics')">ç‰©ç†å…¬å¼ç¤ºä¾‹</button>
                <button class="example-btn" onclick="loadExample('markdown')">Markdown ç¤ºä¾‹</button>
                <button class="example-btn" onclick="loadExample('matrix')">çŸ©é˜µç¤ºä¾‹</button>
                <button class="example-btn" onclick="loadExample('empty')">æ¸…ç©ºç¼–è¾‘å™¨</button>
            </div>
        </div>
        
        <footer>
            <p>Â© 2023 ç¦»çº¿ Markdown å’Œ LaTeX è§£æå™¨ | ä½¿ç”¨ MathJax 3 å’Œ markdown-it åº“ | å®Œå…¨ç¦»çº¿å·¥ä½œ</p>
        </footer>
    </div>

    <!-- å†…è” markdown-it åº“ -->
    <script>
        // markdown-it åº“çš„ç®€åŒ–ç‰ˆæœ¬ (æ ¸å¿ƒåŠŸèƒ½)
        // åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæ‚¨å¯èƒ½éœ€è¦ä½¿ç”¨å®Œæ•´çš„ markdown-it åº“
        // è¿™é‡Œæˆ‘ä»¬åªå®ç°æ ¸å¿ƒçš„ Markdown è§£æåŠŸèƒ½
        class MarkdownIt {
            constructor(options) {
                this.options = options || {};
                this.rules = {
                    heading: /^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,
                    hr: /^( *[-*_]){3,} *(?:\n+|$)/,
                    blockquote: /^( *>[^\n]+(\n[^\n]+)*\n*)+/,
                    list: /^( *)([*+-]|\d+\.) [\s\S]+?(?:\n+(?=\1?(?:[-*_] *){3,}(?:\n+|$))|\n+(?= *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$))|\n{2,}(?! )(?!\1)(?!\d+\. ))/,
                    code: /^((?: {4}|\t)[^\n]+\n*)+/,
                    fence: /^ *(`{3,}|~{3,}) *(\S+)? *\n([\s\S]+?)\s*\1 *(?:\n+|$)/,
                    html: /^ *(?:<!--[\s\S]*?-->|<!\[CDATA\[[\s\S]*?\]\]>|<(\w+)(?:[^>]*?)>[\s\S]*?<\/\1>|<(\w+)(?:[^>]*?)\/>) *(?:\n{2,}|\s*$)/,
                    def: /^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,
                    table: /^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)/,
                    lheading: /^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,
                    paragraph: /^([^\n]+(?:\n(?! *(`{3,}|~{3,})[^.])(?! *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$))(?!\d+\. )(?! *[-*+] )(?! *> )(?!\1\.)(?! *\d\.)(?!#{1,6} )(?! *$)[^\n]+)*\n*)+/,
                    text: /^[^\n]+/,
                    escape: /^\\([\\`*{}\[\]()#+\-.!_>])/,
                    tag: /^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,
                    link: /^!?\[(inside)\]\(href\)/,
                    reflink: /^!?\[(inside)\]\s*\[([^\]]*)\]/,
                    nolink: /^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,
                    strong: /^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,
                    em: /^_([^\s_](?:[^_]*[^\s_])?)_(?!_)|^\*([^\s*](?:[^*]*[^\s*])?)\*(?!\*)/,
                    code_inline: /^(`+)([\s\S]*?[^`])\1(?!`)/,
                    br: /^ {2,}\n(?!\s*$)/,
                    del: /^~~(?=\S)([\s\S]*?\S)~~/,
                    inlineText: /^[\s\S]+?(?=[\\<!\[_*`$]| {2,}\n|$)/
                };
            }
            
            parse(src) {
                let tokens = [];
                let cap;
                
                while (src) {
                    // è½¬ä¹‰å­—ç¬¦
                    if (cap = this.rules.escape.exec(src)) {
                        src = src.substring(cap[0].length);
                        tokens.push({ type: 'text', content: cap[1] });
                        continue;
                    }
                    
                    // ä»£ç 
                    if (cap = this.rules.code_inline.exec(src)) {
                        src = src.substring(cap[0].length);
                        tokens.push({ type: 'code_inline', content: cap[2] });
                        continue;
                    }
                    
                    // ç²—ä½“
                    if (cap = this.rules.strong.exec(src)) {
                        src = src.substring(cap[0].length);
                        tokens.push({ type: 'strong', content: cap[1] || cap[2] });
                        continue;
                    }
                    
                    // æ–œä½“
                    if (cap = this.rules.em.exec(src)) {
                        src = src.substring(cap[0].length);
                        tokens.push({ type: 'em', content: cap[1] || cap[2] });
                        continue;
                    }
                    
                    // åˆ é™¤çº¿
                    if (cap = this.rules.del.exec(src)) {
                        src = src.substring(cap[0].length);
                        tokens.push({ type: 'del', content: cap[1] });
                        continue;
                    }
                    
                    // è¡Œå†…ä»£ç 
                    if (cap = this.rules.code_inline.exec(src)) {
                        src = src.substring(cap[0].length);
                        tokens.push({ type: 'code_inline', content: cap[2] });
                        continue;
                    }
                    
                    // æ¢è¡Œ
                    if (cap = this.rules.br.exec(src)) {
                        src = src.substring(cap[0].length);
                        tokens.push({ type: 'br' });
                        continue;
                    }
                    
                    // æ–‡æœ¬
                    if (cap = this.rules.inlineText.exec(src)) {
                        src = src.substring(cap[0].length);
                        tokens.push({ type: 'text', content: cap[0] });
                        continue;
                    }
                }
                
                return tokens;
            }
            
            render(tokens) {
                let result = '';
                
                for (let token of tokens) {
                    switch (token.type) {
                        case 'text':
                            result += token.content;
                            break;
                        case 'strong':
                            result += `<strong>${this.renderInline(token.content)}</strong>`;
                            break;
                        case 'em':
                            result += `<em>${this.renderInline(token.content)}</em>`;
                            break;
                        case 'del':
                            result += `<del>${this.renderInline(token.content)}</del>`;
                            break;
                        case 'code_inline':
                            result += `<code>${token.content}</code>`;
                            break;
                        case 'br':
                            result += `<br>`;
                            break;
                    }
                }
                
                return result;
            }
            
            renderInline(content) {
                // ç®€åŒ–ç‰ˆæœ¬ï¼Œä»…å¤„ç†åŸºæœ¬è½¬ä¹‰
                return content.replace(/&/g, '&amp;')
                             .replace(/</g, '&lt;')
                             .replace(/>/g, '&gt;')
                             .replace(/"/g, '&quot;')
                             .replace(/'/g, '&#039;');
            }
            
            // ç®€åŒ–çš„ markdown è§£æ
            renderMarkdown(text) {
                // è¿™é‡Œä½¿ç”¨ä¸€ä¸ªç®€åŒ–çš„è§£æå™¨
                // åœ¨å®é™…åº”ç”¨ä¸­ï¼Œåº”è¯¥ä½¿ç”¨å®Œæ•´çš„ markdown-it
                let html = text;
                
                // æ ‡é¢˜
                html = html.replace(/^# (.*$)/gm, '<h1>$1</h1>');
                html = html.replace(/^## (.*$)/gm, '<h2>$1</h2>');
                html = html.replace(/^### (.*$)/gm, '<h3>$1</h3>');
                html = html.replace(/^#### (.*$)/gm, '<h4>$1</h4>');
                html = html.replace(/^##### (.*$)/gm, '<h5>$1</h5>');
                html = html.replace(/^###### (.*$)/gm, '<h6>$1</h6>');
                
                // æ°´å¹³çº¿
                html = html.replace(/^[-*_]{3,}$/gm, '<hr>');
                
                // ç²—ä½“
                html = html.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
                html = html.replace(/__(.*?)__/g, '<strong>$1</strong>');
                
                // æ–œä½“
                html = html.replace(/\*(.*?)\*/g, '<em>$1</em>');
                html = html.replace(/_(.*?)_/g, '<em>$1</em>');
                
                // åˆ é™¤çº¿
                html = html.replace(/~~(.*?)~~/g, '<del>$1</del>');
                
                // è¡Œå†…ä»£ç 
                html = html.replace(/`(.*?)`/g, '<code>$1</code>');
                
                // ä»£ç å—
                html = html.replace(/```([\s\S]*?)```/g, '<pre><code>$1</code></pre>');
                
                // å—å¼•ç”¨
                html = html.replace(/^> (.*$)/gm, '<blockquote>$1</blockquote>');
                
                // æ— åºåˆ—è¡¨
                html = html.replace(/^\s*[-*+] (.*$)/gm, '<li>$1</li>');
                html = html.replace(/(<li>.*<\/li>\n?)+/g, '<ul>$&</ul>');
                
                // é“¾æ¥
                html = html.replace(/\[([^\]]+)\]\(([^)]+)\)/g, '<a href="$2" target="_blank">$1</a>');
                
                // å›¾ç‰‡
                html = html.replace(/!\[([^\]]+)\]\(([^)]+)\)/g, '<img src="$2" alt="$1">');
                
                // æ®µè½
                let lines = html.split('\n');
                let result = [];
                let inParagraph = false;
                let paragraphContent = '';
                
                for (let line of lines) {
                    if (line.trim() === '') {
                        if (inParagraph) {
                            result.push(`<p>${paragraphContent}</p>`);
                            paragraphContent = '';
                            inParagraph = false;
                        }
                        result.push('');
                    } else if (line.startsWith('<') && line.endsWith('>')) {
                        if (inParagraph) {
                            result.push(`<p>${paragraphContent}</p>`);
                            paragraphContent = '';
                            inParagraph = false;
                        }
                        result.push(line);
                    } else {
                        if (!inParagraph) inParagraph = true;
                        paragraphContent += (paragraphContent ? ' ' : '') + line;
                    }
                }
                
                if (inParagraph) {
                    result.push(`<p>${paragraphContent}</p>`);
                }
                
                return result.join('\n');
            }
        }
        
        // åˆ›å»º markdown-it å®ä¾‹
        const md = new MarkdownIt();
    </script>
    
    <!-- MathJax 3 åº“ -->
    <script id="MathJax-script" async src="http://mx.j2inter.com/res/mathjax.js"></script>
    
    <script>
        // è·å– DOM å…ƒç´ 
        const markdownInput = document.getElementById('markdown-input');
        const preview = document.getElementById('preview');
        const status = document.getElementById('status');
        
        // åˆå§‹å†…å®¹
        const initialContent = `# Markdown ä¸ LaTeX ç¤ºä¾‹

## æ•°å­¦å…¬å¼ç¤ºä¾‹

### è¡Œå†…å…¬å¼
è´¨èƒ½æ–¹ç¨‹ï¼š$E = mc^2$ï¼Œæ¬§æ‹‰å…¬å¼ï¼š$e^{i\\pi} + 1 = 0$ã€‚

### å—çº§å…¬å¼
å‹¾è‚¡å®šç†ï¼š
$$ a^2 + b^2 = c^2 $$

äºŒæ¬¡æ–¹ç¨‹æ±‚æ ¹å…¬å¼ï¼š
$$ x = \\frac{-b \\pm \\sqrt{b^2 - 4ac}}{2a} $$

## ç‰©ç†å…¬å¼ç¤ºä¾‹

### è–›å®šè°”æ–¹ç¨‹
$$ i\\hbar\\frac{\\partial}{\\partial t}\\Psi(\\mathbf{r},t) = \\hat{H}\\Psi(\\mathbf{r},t) $$

### éº¦å…‹æ–¯éŸ¦æ–¹ç¨‹ç»„
$$
\\begin{aligned}
\\nabla \\cdot \\mathbf{E} &= \\frac{\\rho}{\\varepsilon_0} \\\\
\\nabla \\cdot \\mathbf{B} &= 0 \\\\
\\nabla \\times \\mathbf{E} &= -\\frac{\\partial \\mathbf{B}}{\\partial t} \\\\
\\nabla \\times \\mathbf{B} &= \\mu_0\\mathbf{J} + \\mu_0\\varepsilon_0\\frac{\\partial \\mathbf{E}}{\\partial t}
\\end{aligned}
$$

## Markdown åŠŸèƒ½ç¤ºä¾‹

### æ–‡æœ¬æ ·å¼
è¿™æ˜¯**ç²—ä½“æ–‡æœ¬**ï¼Œè¿™æ˜¯*æ–œä½“æ–‡æœ¬*ï¼Œè¿™æ˜¯~~åˆ é™¤çº¿æ–‡æœ¬~~ã€‚

### ä»£ç 
è¡Œå†…ä»£ç ï¼š\`print("Hello World")\`

ä»£ç å—ï¼š
\`\`\`python
def fibonacci(n):
    if n <= 1:
        return n
    else:
        return fibonacci(n-1) + fibonacci(n-2)
\`\`\`

### åˆ—è¡¨
- æ— åºåˆ—è¡¨é¡¹ 1
- æ— åºåˆ—è¡¨é¡¹ 2
  - åµŒå¥—åˆ—è¡¨é¡¹

1. æœ‰åºåˆ—è¡¨é¡¹ 1
2. æœ‰åºåˆ—è¡¨é¡¹ 2

### å¼•ç”¨
> è¿™æ˜¯å¼•ç”¨æ–‡æœ¬ã€‚
> å¼•ç”¨å¯ä»¥æœ‰å¤šè¡Œã€‚

### é“¾æ¥
[GitHub](https://github.com) æ˜¯ä¸€ä¸ªä»£ç æ‰˜ç®¡å¹³å°ã€‚

---
*æœ€åæ›´æ–°: ${new Date().toLocaleDateString()}*`;
        
        // è®¾ç½®åˆå§‹å†…å®¹
        markdownInput.value = initialContent;
        
        // æ›´æ–°é¢„è§ˆ
        function updatePreview() {
            const markdownText = markdownInput.value;
            
            // ä½¿ç”¨ markdown-it æ¸²æŸ“ Markdown
            const html = md.renderMarkdown(markdownText);
            
            // æ›´æ–°é¢„è§ˆåŒºåŸŸ
            preview.innerHTML = html;
            
            // å¦‚æœæœ‰ MathJaxï¼Œé‡æ–°å¤„ç†æ•°å­¦å…¬å¼
            if (window.MathJax) {
                MathJax.typesetPromise([preview]).catch(err => console.log('MathJax é”™è¯¯:', err));
            }
            
            // æ˜¾ç¤ºçŠ¶æ€ä¿¡æ¯
            showStatus('é¢„è§ˆå·²æ›´æ–°', 'success');
        }
        
        // æ˜¾ç¤ºçŠ¶æ€ä¿¡æ¯
        function showStatus(message, type = 'info') {
            status.textContent = message;
            status.className = 'status show';
            
            if (type === 'success') {
                status.style.backgroundColor = '#d4edda';
                status.style.color = '#155724';
            } else if (type === 'error') {
                status.style.backgroundColor = '#f8d7da';
                status.style.color = '#721c24';
            } else {
                status.style.backgroundColor = '#d1ecf1';
                status.style.color = '#0c5460';
            }
            
            // 3ç§’åéšè—
            setTimeout(() => {
                status.classList.remove('show');
            }, 3000);
        }
        
        // æ’å…¥æ–‡æœ¬åˆ°ç¼–è¾‘å™¨
        function insertText(text) {
            const textarea = markdownInput;
            const start = textarea.selectionStart;
            const end = textarea.selectionEnd;
            const before = textarea.value.substring(0, start);
            const after = textarea.value.substring(end);
            
            textarea.value = before + text + after;
            textarea.focus();
            textarea.selectionStart = textarea.selectionEnd = start + text.length;
            
            updatePreview();
            showStatus(`å·²æ’å…¥: ${text}`, 'success');
        }
        
        // æ¸…ç©ºç¼–è¾‘å™¨
        function clearEditor() {
            markdownInput.value = '';
            updatePreview();
            showStatus('ç¼–è¾‘å™¨å·²æ¸…ç©º', 'info');
        }
        
        // åŠ è½½ç¤ºä¾‹
        function loadExample(type) {
            let content = '';
            
            switch(type) {
                case 'math':
                    content = `# æ•°å­¦å…¬å¼ç¤ºä¾‹

## åŸºæœ¬è¿ç®—
åŠ æ³•ï¼š$a + b$
å‡æ³•ï¼š$a - b$
ä¹˜æ³•ï¼š$a \\times b$ æˆ– $a \\cdot b$
é™¤æ³•ï¼š$\\frac{a}{b}$

## å¾®ç§¯åˆ†
å¯¼æ•°ï¼š$f'(x) = \\lim_{h\\to 0} \\frac{f(x+h)-f(x)}{h}$

ç§¯åˆ†ï¼š
$$ \\int_a^b f(x) dx = F(b) - F(a) $$

å¤šé‡ç§¯åˆ†ï¼š
$$ \\iiint_V f(x,y,z) dx dy dz $$

## çº§æ•°
æ³°å‹’çº§æ•°ï¼š
$$ f(x) = \\sum_{n=0}^{\\infty} \\frac{f^{(n)}(a)}{n!} (x-a)^n $$

å‚…é‡Œå¶çº§æ•°ï¼š
$$ f(x) = \\frac{a_0}{2} + \\sum_{n=1}^{\\infty} [a_n \\cos(nx) + b_n \\sin(nx)] $$`;
                    break;
                    
                case 'physics':
                    content = `# ç‰©ç†å…¬å¼ç¤ºä¾‹

## ç»å…¸åŠ›å­¦
ç‰›é¡¿ç¬¬äºŒå®šå¾‹ï¼š
$$ F = ma $$

åŠ¨èƒ½ï¼š
$$ E_k = \\frac{1}{2}mv^2 $$

ä¸‡æœ‰å¼•åŠ›å®šå¾‹ï¼š
$$ F = G\\frac{m_1 m_2}{r^2} $$

## ç”µç£å­¦
åº“ä»‘å®šå¾‹ï¼š
$$ F = \\frac{1}{4\\pi\\varepsilon_0} \\frac{q_1 q_2}{r^2} $$

æ¬§å§†å®šå¾‹ï¼š
$$ V = IR $$

æ´›ä¼¦å…¹åŠ›ï¼š
$$ \\mathbf{F} = q(\\mathbf{E} + \\mathbf{v} \\times \\mathbf{B}) $$

## ç›¸å¯¹è®º
æ—¶é—´è†¨èƒ€ï¼š
$$ \\Delta t' = \\frac{\\Delta t}{\\sqrt{1 - \\frac{v^2}{c^2}}} $$

é•¿åº¦æ”¶ç¼©ï¼š
$$ L' = L \\sqrt{1 - \\frac{v^2}{c^2}} $$

ç›¸å¯¹è®ºæ€§èƒ½é‡ï¼š
$$ E = \\frac{mc^2}{\\sqrt{1 - \\frac{v^2}{c^2}}} $$`;
                    break;
                    
                case 'markdown':
                    content = `# Markdown ç¤ºä¾‹

## æ–‡æœ¬æ ¼å¼
**ç²—ä½“æ–‡æœ¬**
*æ–œä½“æ–‡æœ¬*
~~åˆ é™¤çº¿æ–‡æœ¬~~

## åˆ—è¡¨
### æ— åºåˆ—è¡¨
- é¡¹ç›® 1
- é¡¹ç›® 2
  - å­é¡¹ç›® 2.1
  - å­é¡¹ç›® 2.2
- é¡¹ç›® 3

### æœ‰åºåˆ—è¡¨
1. ç¬¬ä¸€é¡¹
2. ç¬¬äºŒé¡¹
   1. å­é¡¹ 2.1
   2. å­é¡¹ 2.2
3. ç¬¬ä¸‰é¡¹

## ä»£ç 
### è¡Œå†…ä»£ç 
ä½¿ç”¨ \`console.log()\` æ‰“å°ä¿¡æ¯ã€‚

### ä»£ç å—
\`\`\`javascript
// JavaScript ç¤ºä¾‹
function greet(name) {
    return \`Hello, \${name}!\`;
}

console.log(greet('World'));
\`\`\`

## å¼•ç”¨
> è¿™æ˜¯å¼•ç”¨æ–‡æœ¬ã€‚
> å¼•ç”¨å¯ä»¥è·¨è¶Šå¤šè¡Œã€‚

## é“¾æ¥å’Œå›¾ç‰‡
[æ‰“å¼€ç™¾åº¦](https://www.baidu.com)

![æ›¿ä»£æ–‡æœ¬](https://via.placeholder.com/150)

## è¡¨æ ¼
| å§“å | å¹´é¾„ | åŸå¸‚ |
|------|------|------|
| å¼ ä¸‰ | 25   | åŒ—äº¬ |
| æå›› | 30   | ä¸Šæµ· |
| ç‹äº” | 28   | å¹¿å· |`;
                    break;
                    
                case 'matrix':
                    content = `# çŸ©é˜µç¤ºä¾‹

## åŸºæœ¬çŸ©é˜µ
ä¸€ä¸ª 2x2 çŸ©é˜µï¼š
$$
\\begin{pmatrix}
a & b \\\\
c & d
\\end{pmatrix}
$$

## è¡Œåˆ—å¼
2x2 çŸ©é˜µè¡Œåˆ—å¼ï¼š
$$
\\begin{vmatrix}
a & b \\\\
c & d
\\end{vmatrix} = ad - bc
$$

## çº¿æ€§æ–¹ç¨‹ç»„
$$
\\begin{cases}
a_{11}x_1 + a_{12}x_2 + \\cdots + a_{1n}x_n = b_1 \\\\
a_{21}x_1 + a_{22}x_2 + \\cdots + a_{2n}x_n = b_2 \\\\
\\vdots \\\\
a_{m1}x_1 + a_{m2}x_2 + \\cdots + a_{mn}x_n = b_m
\\end{cases}
$$

çŸ©é˜µå½¢å¼ï¼š
$$ A\\mathbf{x} = \\mathbf{b} $$

## ç‰¹å¾å€¼ä¸ç‰¹å¾å‘é‡
$$ A\\mathbf{v} = \\lambda\\mathbf{v} $$

å…¶ä¸­ $\\lambda$ æ˜¯ç‰¹å¾å€¼ï¼Œ$\\mathbf{v}$ æ˜¯å¯¹åº”çš„ç‰¹å¾å‘é‡ã€‚

## çŸ©é˜µè¿ç®—
çŸ©é˜µä¹˜æ³•ï¼š
$$
\\begin{pmatrix}
a_{11} & a_{12} \\\\
a_{21} & a_{22}
\\end{pmatrix}
\\begin{pmatrix}
b_{11} & b_{12} \\\\
b_{21} & b_{22}
\\end{pmatrix}
=
\\begin{pmatrix}
a_{11}b_{11} + a_{12}b_{21} & a_{11}b_{12} + a_{12}b_{22} \\\\
a_{21}b_{11} + a_{22}b_{21} & a_{21}b_{12} + a_{22}b_{22}
\\end{pmatrix}
$$`;
                    break;
                    
                case 'empty':
                    content = '';
                    break;
            }
            
            markdownInput.value = content;
            updatePreview();
            showStatus(`å·²åŠ è½½ ${type} ç¤ºä¾‹`, 'success');
        }
        
        // ç›‘å¬è¾“å…¥äº‹ä»¶
        markdownInput.addEventListener('input', updatePreview);
        
        // åˆå§‹åŒ–é¢„è§ˆ
        updatePreview();
        
        // æ˜¾ç¤ºåŠ è½½å®Œæˆæ¶ˆæ¯
        window.addEventListener('load', () => {
            showStatus('é¡µé¢åŠ è½½å®Œæˆï¼Œå¯ä»¥å¼€å§‹ç¼–è¾‘ Markdown å’Œ LaTeX å…¬å¼', 'success');
        });
    </script>
</body>
</html>